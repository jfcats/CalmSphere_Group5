<div class="form-wrapper">
  
  <div class="form-card">
    
    <div class="form-header">
      <h2>{{ edicion ? 'Editar Disponibilidad' : 'Registrar Disponibilidad' }}</h2>
      <p>Define el día y el rango de horas para la atención.</p>
    </div>

    <form [formGroup]="form" (submit)="aceptar()">

      <!-- ID oculto pero presente para la lógica -->
      <input type="hidden" formControlName="disponibilidadId">

      <!-- SELECTOR DE DÍA -->
      <mat-form-field appearance="outline" class="full-width custom-field">
        <mat-label>Día de la semana</mat-label>
        <mat-select formControlName="diaSemana" required>
          <mat-option *ngFor="let d of diasSemana" [value]="d.value">
            {{ d.viewValue }}
          </mat-option>
        </mat-select>
        <mat-icon matSuffix></mat-icon>
        @if (form.get('diaSemana')?.hasError('required')) {
          <mat-error>Debes seleccionar un día.</mat-error>
        }
      </mat-form-field>

      <!-- FILA DE HORARIOS -->
      <div class="time-row">
        
        <!-- HORA INICIO -->
        <mat-form-field appearance="outline" class="custom-field">
          <mat-label>Hora de inicio</mat-label>
          <input matInput type="time" formControlName="horaInicio" required />
          <mat-icon matSuffix></mat-icon>
          @if (form.get('horaInicio')?.hasError('required')) {
            <mat-error>Requerido</mat-error>
          }
        </mat-form-field>

        <!-- HORA FIN -->
        <mat-form-field appearance="outline" class="custom-field">
          <mat-label>Hora de fin</mat-label>
          <input matInput type="time" formControlName="horaFin" required />
          <mat-icon matSuffix></mat-icon>
          @if (form.get('horaFin')?.hasError('required')) {
            <mat-error>Requerido</mat-error>
          }
        </mat-form-field>

      </div>

      <!-- BOTONES DE ACCIÓN -->
      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="router.navigate(['disponibilidades'])">
          Cancelar
        </button>
        
        <button type="submit" class="btn-save" [disabled]="form.invalid">
          {{ edicion ? 'Actualizar' : 'Guardar Horario' }}
        </button>
      </div>

    </form>
  </div>
</div>